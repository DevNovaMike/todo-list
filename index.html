<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
</title>Professional To-Do List</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
  /* ---------- Base Styles ---------- */
  body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 0;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding-top: 20px;
    transition: background 0.5s, color 0.5s;
    background: linear-gradient(135deg, #f0f3f7, #d9e2ec);
  }
  body.dark-mode {
    background: linear-gradient(135deg, #1f2a38, #3b4a5b);
    color: #f0f0f0;
  }

  /* ---------- Container ---------- */
  .todo-container {
    background: rgba(255,255,255,0.85);
    backdrop-filter: blur(12px);
    padding: 20px 25px;
    border-radius: 20px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.1);
    width: 95%;
    max-width: 550px;
    text-align: center;
    transition: background 0.5s, color 0.5s;
  }
  body.dark-mode .todo-container { background: rgba(50,50,50,0.85); }

  h1 { margin-bottom: 15px; font-weight: 600; font-size: 1.8rem; }

  /* ---------- Inputs ---------- */
  .input-group {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 20px;
    justify-content: center;
  }
  input, select {
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 10px;
    font-size: 14px;
    flex: 1 1 100px;
    min-width: 100px;
    transition: 0.3s;
  }
  body.dark-mode input, body.dark-mode select { border: 1px solid #888; background: #444; color: #f0f0f0; }
  button { padding: 10px 15px; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; transition: 0.3s; flex-shrink: 0; }

  #addTaskBtn { background: #4CAF50; color: white; }
  #addTaskBtn:hover { background: #45a049; }
  #clearCompletedBtn { background: #f44336; color: white; margin-top: 15px; }
  #clearCompletedBtn:hover { background: #d32f2f; }
  #darkModeBtn { background: #007BFF; color: white; margin-bottom: 15px; }
  #darkModeBtn:hover { background: #0056b3; }
  #sortSelect { padding: 10px; border-radius: 10px; border: 1px solid #ccc; font-size: 14px; margin-bottom: 15px; }

  /* ---------- Task List ---------- */
  ul { list-style: none; padding: 0; margin: 15px 0; min-height: 50px; }
  li {
    background: #fff;
    margin: 10px 0;
    padding: 14px 12px;
    border-radius: 15px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    transition: all 0.3s ease, transform 0.2s;
    cursor: grab;
    word-wrap: break-word;
  }
  body.dark-mode li { background: #555; color: #f0f0f0; }
  li.completed { background: #e0e0e0; color: gray; text-decoration: line-through; }
  body.dark-mode li.completed { background: #333; color: #ccc; }

  /* ---------- Task Top ---------- */
  .task-top { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 5px; }
  .task-buttons { display: flex; gap: 5px; flex-wrap: wrap; }
  .completeBtn { background: #007BFF; color: white; padding: 5px 10px; border-radius: 6px; font-size: 12px; }
  .deleteBtn { background: red; color: white; padding: 5px 10px; border-radius: 6px; font-size: 12px; }

  /* ---------- Badges ---------- */
  .badges { display: flex; gap: 6px; flex-wrap: wrap; align-items: center; }
  .badge { padding: 3px 8px; border-radius: 8px; font-size: 12px; color: white; font-weight: 600; }
  .category-work { background: #007BFF; }
  .category-personal { background: #6f42c1; }
  .category-study { background: #fd7e14; }
  .category-other { background: #20c997; }
  .priority-low { background: #28a745; }
  .priority-medium { background: #ffc107; color: black; }
  .priority-high { background: #dc3545; }

  .due-date { font-size: 12px; color: #555; }
  li.due-today { border-left: 5px solid #ffc107; }
  li.overdue { border-left: 5px solid #dc3545; }

  #taskCounter { font-weight: bold; margin-top: 10px; }

  /* ---------- Responsive Media Queries ---------- */
  @media screen and (max-width: 600px) {
    h1 { font-size: 1.5rem; }
    .input-group { flex-direction: column; gap: 10px; }
    input, select, button { width: 100%; }
    li { font-size: 14px; padding: 12px 10px; }
  }

  @media screen and (min-width: 601px) and (max-width: 900px) {
    .todo-container { width: 90%; }
    h1 { font-size: 1.7rem; }
  }

  @media screen and (min-width: 901px) {
    .todo-container { width: 500px; }
  }
</style>
</head>
<body>

<div class="todo-container">
  

  <!-- Dark Mode -->
  <button id="darkModeBtn">Toggle Dark Mode</button>

  <!-- Sorting -->
  <select id="sortSelect">
    <option value="default">Sort: Default</option>
    <option value="priority">Sort: Priority</option>
    <option value="dueDate">Sort: Due Date</option>
  </select>

  <!-- Inputs -->
  <div class="input-group">
    <input type="text" id="taskInput" placeholder="Enter a task..." />
    <select id="categorySelect">
      <option value="work">Work</option>
      <option value="personal">Personal</option>
      <option value="study">Study</option>
      <option value="other">Other</option>
    </select>
    <select id="prioritySelect">
      <option value="low">Low</option>
      <option value="medium">Medium</option>
      <option value="high">High</option>
    </select>
    <input type="date" id="dueDateInput" />
    <button id="addTaskBtn">Add</button>
  </div>

  <!-- Task List -->
  <ul id="taskList"></ul>

  <!-- Counter -->
  <p id="taskCounter">0 tasks left</p>

  <!-- Clear Completed -->
  <button id="clearCompletedBtn">Clear Completed Tasks</button>
</div>

<script>
const taskInput = document.getElementById("taskInput");
const categorySelect = document.getElementById("categorySelect");
const prioritySelect = document.getElementById("prioritySelect");
const dueDateInput = document.getElementById("dueDateInput");
const addTaskBtn = document.getElementById("addTaskBtn");
const taskList = document.getElementById("taskList");
const taskCounter = document.getElementById("taskCounter");
const clearCompletedBtn = document.getElementById("clearCompletedBtn");
const darkModeBtn = document.getElementById("darkModeBtn");
const sortSelect = document.getElementById("sortSelect");

window.onload = () => {
  if(localStorage.getItem("darkMode")==="enabled") document.body.classList.add("dark-mode");
  loadTasks();
  checkReminders();
};

darkModeBtn.addEventListener("click", ()=>{
  document.body.classList.toggle("dark-mode");
  localStorage.setItem("darkMode", document.body.classList.contains("dark-mode")?"enabled":"disabled");
});

const priorityMap = { high:3, medium:2, low:1 };

function addTask(text, category, priority, dueDate, completed=false){
  if(!text) return;
  const li = document.createElement("li");
  li.dataset.category = category;
  li.dataset.priority = priority;
  li.dataset.dueDate = dueDate;
  if(completed) li.classList.add("completed");

  const topRow = document.createElement("div");
  topRow.classList.add("task-top");
  const span = document.createElement("span"); span.textContent=text; span.style.flexGrow="1";
  const buttonDiv = document.createElement("div"); buttonDiv.classList.add("task-buttons");

  const completeBtn=document.createElement("button"); completeBtn.textContent="Complete"; completeBtn.classList.add("completeBtn");
  completeBtn.addEventListener("click",()=>{ li.classList.toggle("completed"); saveTasks(); updateCounter(); checkReminders(); });

  const deleteBtn=document.createElement("button"); deleteBtn.textContent="Delete"; deleteBtn.classList.add("deleteBtn");
  deleteBtn.addEventListener("click",()=>{ li.remove(); saveTasks(); updateCounter(); checkReminders(); });

  buttonDiv.appendChild(completeBtn); buttonDiv.appendChild(deleteBtn);
  topRow.appendChild(span); topRow.appendChild(buttonDiv);

  const badgesDiv=document.createElement("div"); badgesDiv.classList.add("badges");
  const categoryBadge=document.createElement("span"); categoryBadge.textContent=category.charAt(0).toUpperCase()+category.slice(1);
  categoryBadge.classList.add("badge","category-"+category);
  const priorityBadge=document.createElement("span"); priorityBadge.textContent=priority.charAt(0).toUpperCase()+priority.slice(1);
  priorityBadge.classList.add("badge","priority-"+priority);
  badgesDiv.appendChild(categoryBadge); badgesDiv.appendChild(priorityBadge);
  if(dueDate){ const dueDateEl=document.createElement("div"); dueDateEl.textContent="Due: "+dueDate; dueDateEl.classList.add("due-date"); badgesDiv.appendChild(dueDateEl); }

  li.appendChild(topRow); li.appendChild(badgesDiv);
  taskList.appendChild(li);

  li.draggable=true; addDragEvents(li);
  saveTasks(); updateCounter(); checkReminders();
}

addTaskBtn.addEventListener("click", ()=>{ addTask(taskInput.value.trim(), categorySelect.value, prioritySelect.value, dueDateInput.value); taskInput.value=""; dueDateInput.value=""; });
taskInput.addEventListener("keypress",(e)=>{ if(e.key==="Enter"){ addTask(taskInput.value.trim(), categorySelect.value, prioritySelect.value, dueDateInput.value); taskInput.value=""; dueDateInput.value=""; } });

function saveTasks(){
  const tasks=[]; document.querySelectorAll("#taskList li").forEach(li=>tasks.push({ text:li.querySelector(".task-top span").textContent, completed:li.classList.contains("completed"), category:li.dataset.category, priority:li.dataset.priority, dueDate:li.dataset.dueDate }));
  localStorage.setItem("tasks",JSON.stringify(tasks));
}
function loadTasks(){
  const saved=JSON.parse(localStorage.getItem("tasks"))||[];
  saved.forEach(t=>addTask(t.text,t.category,t.priority,t.dueDate,t.completed));
  updateCounter();
}

function updateCounter(){
  const incomplete=document.querySelectorAll("#taskList li:not(.completed)").length;
  taskCounter.textContent=`${incomplete} task(s) left`;
}

clearCompletedBtn.addEventListener("click",()=>{ document.querySelectorAll("#taskList li.completed").forEach(li=>li.remove()); saveTasks(); updateCounter(); checkReminders(); });

sortSelect.addEventListener("change", ()=>{
  const items=Array.from(taskList.children);
  if(sortSelect.value==="priority") items.sort((a,b)=>priorityMap[b.dataset.priority]-priorityMap[a.dataset.priority]);
  else if(sortSelect.value==="dueDate") items.sort((a,b)=>{ if(!a.dataset.dueDate) return 1; if(!b.dataset.dueDate) return -1; return new Date(a.dataset.dueDate)-new Date(b.dataset.dueDate); });
  items.forEach(i=>taskList.appendChild(i));
});

function addDragEvents(item){
  item.addEventListener("dragstart",()=>item.classList.add("dragging"));
  item.addEventListener("dragend",()=>{ item.classList.remove("dragging"); saveTasks(); });
}
taskList.addEventListener("dragover",(e)=>{ e.preventDefault(); const after=getDragAfterElement(taskList,e.clientY); const dragging=document.querySelector(".dragging"); if(after==null) taskList.appendChild(dragging); else taskList.insertBefore(dragging,after); });
function getDragAfterElement(container,y){
  const draggable=[...container.querySelectorAll("li:not(.dragging)")];
  return draggable.reduce((closest,child)=>{ const box=child.getBoundingClientRect(); const offset=y-box.top-box.height/2; if(offset<0 && offset>closest.offset) return {offset:offset, element:child}; else return closest; },{offset:Number.NEGATIVE_INFINITY}).element;
}

if("Notification" in window && Notification.permission!=="granted") Notification.requestPermission();
function checkReminders(){
  const today=new Date(); const todayStr=today.toISOString().split("T")[0];
  document.querySelectorAll("#taskList li").forEach(li=>{
    const dueDate=li.dataset.dueDate;
    li.classList.remove("due-today","overdue");
    if(dueDate){
      if(dueDate===todayStr){
        li.classList.add("due-today");
        if(Notification.permission==="granted") new Notification("Task Due Today",{body: li.querySelector(".task-top span").textContent});
      } else if(dueDate<todayStr && !li.classList.contains("completed")) li.classList.add("overdue");
    }
  });
}
setInterval(checkReminders,5*60*1000);
</script>
</body>
</html>
